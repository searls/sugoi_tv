{
  "configVersion": 3,
  "enabled": true,
  "sources": [
    "**/*.swift",
    "**/*.plist",
    "**/*.entitlements",
    "**/*.json",
    "**/*.pbxproj",
    "**/*.xctestplan"
  ],
  "hooks": [
    {
      "type": "claude",
      "event": "PreToolUse",
      "matcher": "Edit|Write|NotebookEdit|Bash",
      "tasks": [
        {
          "name": "lock-config",
          "type": "script",
          "command": "prove_it run_builtin config:lock"
        },
        {
          "name": "ensure-tests",
          "type": "agent",
          "promptType": "reference",
          "prompt": "review:test_investment",
          "when": {
            "linesWrittenSinceLastRun": 500
          }
        }
      ]
    },
    {
      "type": "claude",
      "event": "Stop",
      "tasks": [
        {
          "name": "fast-tests",
          "type": "script",
          "command": "./script/test_fast"
        },
        {
          "name": "coverage-review",
          "type": "agent",
          "promptType": "reference",
          "prompt": "review:test_coverage",
          "when": {
            "variablesPresent": [
              "session_diff"
            ]
          }
        },
        {
          "name": "visual-verify",
          "type": "agent",
          "promptType": "string",
          "prompt": "Check if any SwiftUI View files were modified in this session (look at git diff for files matching *View*.swift or in Views/ directories). If UI files were changed, check the conversation history for evidence that screenshots were taken and visually inspected by Claude directly (not just a subagent summary). If UI was changed but no screenshots were read by Claude, block and say: 'UI files were modified but not visually verified. Build the app, take screenshots, and read them yourself before stopping.'",
          "when": {
            "variablesPresent": [
              "session_diff"
            ]
          }
        }
      ]
    },
    {
      "type": "git",
      "event": "pre-commit",
      "tasks": [
        {
          "name": "full-tests",
          "type": "script",
          "command": "./script/test"
        },
        {
          "name": "commit-review",
          "type": "agent",
          "promptType": "reference",
          "prompt": "review:commit_quality",
          "when": {
            "variablesPresent": [
              "staged_diff"
            ]
          }
        }
      ]
    }
  ],
  "initSeed": "4b24945cfcdf"
}
